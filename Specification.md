# SpiderCamera ‚Äî –¢–µ—Ö–Ω—ñ—á–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è

## 1. –ó–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

**–ù–∞–∑–≤–∞ –ø—Ä–æ—î–∫—Ç—É:** SpiderCamera
**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –ù–∞–¥–±—É–¥–æ–≤–∞ (–ø—Ä–æ–∫—Å—ñ) –¥–æ libcamera –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∫–∞–º–µ—Ä–æ—é –∑ Python —á–µ—Ä–µ–∑ pybind11, –∑ –ø–µ—Ä–µ–¥–∞—á–µ—é RAW-–∫–∞–¥—Ä—ñ–≤ —ñ GPIO-—Ç—Ä–∏–≥–≥–µ—Ä–æ–º.
**–ú–æ–≤–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó:** C++17
**–Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–µ—Ä—É–≤–∞–Ω–Ω—è:** pybind11 (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –∑ Python)
**–¶—ñ–ª—å–æ–≤–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞:** Raspberry Pi –∑ libcamera

---

## 2. –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å

### 2.1 –ö–µ—Ä—É–≤–∞–Ω–Ω—è –∫–∞–º–µ—Ä–æ—é

1. –í–∏—è–≤–ª–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –∫–∞–º–µ—Ä
2. –í–∏–±—ñ—Ä –∞–∫—Ç–∏–≤–Ω–æ—ó –∫–∞–º–µ—Ä–∏ (`set_cam(id)`)
3. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –≤—Ä—É—á–Ω—É –¥–ª—è RAW-—Ñ–æ—Ä–º–∞—Ç—É (–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è `VideoConfiguration` –∞–±–æ `StillConfiguration` –Ω–∞–ø—Ä—è–º—É)
4. –ú–µ—Ç–æ–¥–∏ –∫–µ—Ä—É–≤–∞–Ω–Ω—è:

   * `be_ready()` ‚Äî –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–æ —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—ó
   * `go()` ‚Äî —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—è RAW-–∫–∞–¥—Ä—ñ–≤ —É –ø–∞–º º—è—Ç—å
   * `pause()` ‚Äî –ø—Ä–∏–∑—É–ø–∏–Ω–µ–Ω–Ω—è —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—ó
   * `stop()` ‚Äî –≤–∏–º–∫–Ω–µ–Ω–Ω—è –∫–∞–º–µ—Ä–∏
5. –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–∞–¥—Ä—ñ–≤:

   * RAW-–¥–∞–Ω—ñ, –±–µ–∑ –∑–∞–ø–∏—Å—É —É —Ñ–∞–π–ª
   * –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —á–µ—Ä–µ–∑ `set_frame_callback(cb)` (Python –æ—Ç—Ä–∏–º—É—î np.ndarray)
6. –°—Ç–∞–Ω –∫–∞–º–µ—Ä–∏ (`cam.state`):

   * 0 ‚Äî –≤–∏–º–∫–Ω–µ–Ω–æ
   * 1 ‚Äî –≥–æ—Ç–æ–≤–∞ –¥–æ —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—ó
   * 2 ‚Äî –∞–∫—Ç–∏–≤–Ω–∞ —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—è
   * 4 ‚Äî –ø–æ–º–∏–ª–∫–∞

### 2.2 –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∫–µ—Ä—É–≤–∞–Ω–Ω—è (–≥–∞—Ä—è—á—ñ)

7. ISO: `set_iso()`, `get_iso()` ‚Äî 0‚Ä¶4000
8. –í–∏—Ç—Ä–∏–º–∫–∞: `set_exposure()`, `get_exposure()` ‚Äî –≤ –º—ñ–∫—Ä–æ—Å–µ–∫—É–Ω–¥–∞—Ö
9. –†–æ–∑–¥—ñ–ª—å–Ω–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å: `set_resolution(w,h)`, `get_resolution()` ‚Üí tuple (int, int)
10. –§–æ–∫—É—Å: `set_focus()`, `get_focus()` ‚Äî 0‚Ä¶20 –º–º

> –£—Å—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –º–æ–∂—É—Ç—å –∑–º—ñ–Ω—é–≤–∞—Ç–∏—Å—å –ø—ñ–¥ —á–∞—Å —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—ó (hot update).

### 2.3 GPIO Trigger

11. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è GPIO-–ø—ñ–Ω—É: `set_spider_gpio(pin: int)`
12. –í–≤—ñ–º–∫–Ω–µ–Ω–Ω—è —Ä–µ–∂–∏–º—É trigger: `set_spider_trigger(bool)`
13. –õ–æ–≥—ñ–∫–∞ GPIO:

    * HIGH ‚Äî –∞–∫—Ç–∏–≤–Ω–∞ —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—è (go)
    * LOW ‚Äî –ø–∞—É–∑–∞ –∞–±–æ stop
14. –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤: `get_spider_gpio()`, `get_spider_trigger()`

---

## 3. API —á–µ—Ä–µ–∑ pybind11

–í—Å—ñ –º–µ—Ç–æ–¥–∏ –º–∞—é—Ç—å –±—É—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ —É Python:

```python
cam.set_cam(0)
cam.set_spider_trigger(1)
cam.set_spider_gpio(17)
cam.set_iso(1200)
cam.set_exposure(100)  # us
cam.set_resolution(1920, 1080)
cam.set_focus(10)
cam.be_ready()
cam.go()
cam.pause()
cam.stop()

cam.get_cam()
cam.get_spider_trigger()
cam.get_spider_gpio()
cam.get_iso()
cam.get_exposure()
cam.get_resolution()  # -> (1920, 1080)
cam.get_focus()
cam.state  # 0, 1, 2, 4
```

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–µ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–∞–¥—Ä—ñ–≤:

```python
def on_frame(frame: np.ndarray):
    # –æ–±—Ä–æ–±–∫–∞ RAW-–∫–∞–¥—Ä—É
    pass
cam.set_frame_callback(on_frame)
```

---

## 4. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤ —Ç–∞ –ø–∞–ø–æ–∫

```
SpiderCamera/
‚îú‚îÄ‚îÄ build.sh 
‚îú‚îÄ‚îÄ include/
‚îÇ   ‚îî‚îÄ‚îÄ spider_camera.hpp        # API —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ spider_camera.cpp        # –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –ª–æ–≥—ñ–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ camera_controller.cpp    # –†–æ–±–æ—Ç–∞ –∑ libcamera
‚îÇ   ‚îú‚îÄ‚îÄ gpio_controller.cpp      # –†–æ–±–æ—Ç–∞ –∑ GPIO
‚îÇ   ‚îî‚îÄ‚îÄ frame_buffer.cpp         # –ë—É—Ñ–µ—Ä –∫–∞–¥—Ä—ñ–≤ (–∑–∞ –ø–æ—Ç—Ä–µ–±–∏)
‚îú‚îÄ‚îÄ bindings/
‚îÇ   ‚îî‚îÄ‚îÄ pybind_spider.cpp        # pybind11-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ examples/
‚îÇ   ‚îî‚îÄ‚îÄ demo_python.py           # –¢–µ—Å—Ç–æ–≤–∏–π Python —Å–∫—Ä–∏–ø—Ç
```

---

## 5. –ü–ª–∞–Ω –≤–µ—Ä—Å—ñ–π

### üîπ v0.1 ‚Äî –ë–∞–∑–æ–≤–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è

1. set_cam(), be_ready(), stop()
2. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è RAW-–∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –≤—Ä—É—á–Ω—É
3. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞–Ω—ñ–≤: 0 / 1

### üîπ v0.2 ‚Äî –°—Ç—Ä—ñ–º—ñ–Ω–≥ RAW –∫–∞–¥—Ä—ñ–≤

4. go(), pause(), –æ–±—Ä–æ–±–∫–∞ –∫–∞–¥—Ä—ñ–≤ —É –ø–∞–º º—è—Ç—ñ
5. –ü–µ—Ä–µ–¥–∞—á–∞ –≤ Python —á–µ—Ä–µ–∑ callback
6. –°—Ç–∞–Ω: 2 (—Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—è)

### üîπ v0.3 ‚Äî –ì–∞—Ä—è—á–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

7. set/get: iso, exposure, resolution, focus
8. –ó–º—ñ–Ω–∞ –ø—ñ–¥ —á–∞—Å —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—ó (–±–µ–∑ reset)

### üîπ v0.4 ‚Äî GPIO Trigger

9. set_spider_gpio(), set_spider_trigger()
10. –õ–æ–≥—ñ–∫–∞ HIGH/LOW
11. get-—Ç–µ—Ä–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤

### üîπ v0.5 ‚Äî pybind11 API

12. –í–µ—Å—å API –¥–æ—Å—Ç—É–ø–Ω–∏–π —É Python
13. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–µ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–∞–¥—Ä—ñ–≤ (NumPy)

### üîπ v1.0 ‚Äî –ü–æ–≤–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å –¢–ó

14. –í—Å—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –∑–∞–≤–µ—Ä—à–µ–Ω–æ —ñ –ø—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ

```
–ö–æ–¥ –∑–Ω—ñ–º–∞–Ω–Ω—è, –ø–µ—Ä–µ–¥–∞—á—ñ, GPIO –π –∫–µ—Ä—É–≤–∞–Ω–Ω—è –ø–æ–≤–Ω—ñ—Å—Ç—é –ø—Ä–∞—Ü—é—î –∑–≥—ñ–¥–Ω–æ –¢–ó
```

---

## 6. –û–±–º–µ–∂–µ–Ω–Ω—è

* –ü—Ä–∞—Ü—é—î —Ç—ñ–ª—å–∫–∏ –∑ RAW-—Ñ–æ—Ä–º–∞—Ç–æ–º
* –ù–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è –æ–¥–∏–Ω–æ—á–Ω–µ –∑–Ω—ñ–º–∞–Ω–Ω—è (`capture_one()`)
* –ù–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ JPEG –∞–±–æ —ñ–Ω—à—ñ —Å—Ç–∏—Å–Ω–µ–Ω–Ω—è
* –ü–µ—Ä–µ–¥–∞—á–∞ –ª–∏—à–µ –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—É –ø–∞–º º—è—Ç—å
* –ö–æ–º–ø—ñ–ª—è—Ü—ñ—è —á–µ—Ä–µ–∑ Geany, –±–µ–∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è CMake

---

## 7. –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∏

* –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –∑–∞—Ç—Ä–∏–º–∫–∞ –º—ñ–∂ –∫–∞–¥—Ä–∞–º–∏ (~14 fps)
* –ù–∞–¥—ñ–π–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ –∫–∞–¥—Ä—ñ–≤ —É Python
* –í–∏—Å–æ–∫–∞ —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å GPIO trigger
* –ü—Ä–æ—Å—Ç–∏–π, —Å—Ç–∞–±—ñ–ª—å–Ω–∏–π API –±–µ–∑ –∑–∞–π–≤–æ—ó –ª–æ–≥—ñ–∫–∏

